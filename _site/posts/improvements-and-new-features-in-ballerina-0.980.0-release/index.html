<html lang="en">

<head>
   <!-- Required meta tags -->
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

   <!-- Bootstrap CSS -->


   <title>Ballerina Blog - Overview of Ballerina 0.980</title>

   

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="WSO2, Inc.">
<meta name="keywords" content="" />
<link rel="shortcut icon" href="/img/favicon.ico">
<title>Overview of Ballerina 0.980</title>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92163714-2"></script>
<!--FB-->
<meta property="og:type"               content="article" />
<meta property="og:title"              content="Ballerina - Overview of Ballerina 0.980" />
<meta property="og:description"        content="" />
<meta property="og:image"              content="/blog-images/ballet-sneaker-dress-ballet-dancer-163379.jpeg" />
<!--TWITTER-->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@ballerinalang">
<meta name="twitter:creator" content="@ballerinalang">
<meta name="twitter:title" content="Ballerina">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="/img/ballet-sneaker-dress-ballet-dancer-163379.jpeg">
<meta name="twitter:text:description" content="">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image:width" content="610">
<!--LINKED IN  -->
<meta property='og:title' content="Ballerina"/>
<meta property='og:image' content="/blog-images/ballet-sneaker-dress-ballet-dancer-163379.jpeg"/>
<meta property='og:description' content=""/>
<script>
   window.dataLayer = window.dataLayer || [];
   function gtag() {
       dataLayer.push(arguments);
   }
   gtag('js', new Date());
   gtag('config', 'UA-92163714-2');
</script>
<!-- Google Tag Manager -->
<script>
   (function(w, d, s, l, i) {
       w[l] = w[l] || [];
       w[l].push({
           'gtm.start': new Date().getTime(),
           event: 'gtm.js'
       });
       var f = d.getElementsByTagName(s)[0],
           j = d.createElement(s),
           dl = l != 'dataLayer' ? '&l=' + l : '';
       j.async = true;
       j.src =
           'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
       f.parentNode.insertBefore(j, f);
   })(window, document, 'script', 'dataLayer', 'GTM-PSL2TX4');
</script>
<!-- End Google Tag Manager -->
<script src="/js/moment-2.22.0/moment.min.js"></script>
<script src="//code.jquery.com/jquery-3.3.1.min.js"></script>









<!-- Fonts -->
<link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&display=swap" rel="stylesheet">



<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>



<link rel="stylesheet" href="/css/ballerina-blog.css" >






</head>

<body>
<section>
   <div class="container">
      <div class="row ">
         <div class="col-sm-12 col-md-12">
            

<nav class="navbar navbar-expand-lg navbar-light">
        <a class="navbar-brand" href="https://ballerina.io/"><img src="/img/ballerina-logo.svg"/></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div id="navbarNavDropdown" class="navbar-collapse collapse">
            <ul class="navbar-nav mr-auto">
                <!-- <li class="nav-item active">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Features</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Pricing</a>
                </li> -->

            </ul>
            <ul class="navbar-nav">
           
                <li class="nav-item " id="learnli">
                    <a class="nav-link" href="https://ballerina.io/learn">Learn </a>
                </li>
                <li class="nav-item" id="Eventsli">
                    <a class="nav-link" href="https://ballerina.io/learn/events">Events</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://central.ballerina.io/" target="_blank">Central</a>
                </li>
                <li class="nav-item" id="openli">
                    <a class="nav-link" href="https://ballerina.io/community">Community</a>
                </li>
                <li class="nav-item active" id="helpli">
                    <a class="nav-link" href="/">Blog</a>
                </li>
            </ul>
        </div>
    </nav>

         </div>
        
      </div>
   </div>
</section>


<section class="cPageContent">
   <div class="container">
      <div class="row cBallerinaBlogBody">
         <div class="col-sm-12 col-md-8">
            <div class="cBlogInfo">
               <p class="cDate">26 July 2018</p>
               <h1>Overview of Ballerina 0.980</h1>
               <p class="cAuthor">Kishanthan Thangarajah</p>
            </div>
             </div>
             <div class="col-sm-12 col-md-8 cBlogContent">
               <p>Ballerina 0.980.0 release included some type system improvements and new features. This release also focused on stabilizing the platform with lot of bug fixes and improvements.</p>

<h2 id="object-syntax-change">Object Syntax Change</h2>

<p>Object type descriptor syntax now supports visibility modifiers for both object fields and functions. There are three types of access modifiers (public, private, no-modifier) as explained below.</p>

<pre><code class="language-ballerina">
public type Person object {
    // public - visible everywhere
    public string name;

    // private - visible only within object and its member functions
    private int age;

    // no-modifier - visible only within same package
    string email;
};
</code></pre>

<h2 id="closed-and-open-records">Closed and Open Records</h2>

<p>An <code class="highlighter-rouge">open</code> record can contain extra fields, that is, fields other than those named by individual type descriptors in the record type definition. By default, records can contain extra fields with <code class="highlighter-rouge">any</code> value without any changes to record definition as explained below.</p>

<pre><code class="language-ballerina">
type Person record {
    string name,
    int age = 10,
};

...
// The "country" is an extra field, which is not defined in the person
// type descriptor.
Person tom = { name : "tom", age : 20, country : "USA"};

// You can access the "country" field similar to other fields, but the
// return type will be `any`.
any country = tom.country;

</code></pre>

<p>Additional fields can be defined by using an optional <code class="highlighter-rouge">RecordRestType...</code> at the end of the record definition. In the above example, the Person record definition is equivalent to the definition with <code class="highlighter-rouge">any...</code>.</p>

<pre><code class="language-ballerina">
type Person record {
    string name,
    int age = 10,
    any...
};

</code></pre>

<p>The “rest fields” can also be constrained to other types. Below example shows how it is constrained to <code class="highlighter-rouge">string</code> type.</p>

<pre><code class="language-ballerina">
type Person record {
    string name,
    int age = 10,
    string…
};

...

Person tom = { name : "tom", age : 20, country : "USA"};
string country = tom.country;

</code></pre>

<p>A <code class="highlighter-rouge">closed</code> record cannot contain any extra fields other than what is defined. A closed record can be defined with <code class="highlighter-rouge">RecordRestType</code> being <code class="highlighter-rouge">!</code> as below.</p>

<pre><code class="language-ballerina">
type Person record {
    string name,
    int age = 10,
    !...
};


// Following will result in a compile time error.
Person tom = { name : "tom", age : 20, country : "USA"};

</code></pre>

<h2 id="fixed-length-arrays">Fixed Length Arrays</h2>

<p>The length of an array can be fixed by providing the array length with the array type descriptor.</p>

<pre><code class="language-ballerina">
int[5] array1 = [2, 15, 200, 1500, 5000];

// Following creates an integer array of size five, filled with
// default integer values
int[5] array2;

</code></pre>

<p>An array length of <code class="highlighter-rouge">!...</code> means that the length of the array is to be implied from the context; as shown below:</p>

<pre><code class="language-ballerina">
// Following creates a sealed integer array of size 3.
int[!...] sealedArray = [1, 3, 5];

</code></pre>

<h2 id="byte-type">Byte Type</h2>

<p>The <code class="highlighter-rouge">byte</code> type represents the set of 8-bit unsigned integers. The implicit initial value of the <code class="highlighter-rouge">byte</code> type is <code class="highlighter-rouge">0</code>. Value space for <code class="highlighter-rouge">byte</code> is 0-255 both inclusive.</p>

<p>The following is an example of byte definition.</p>

<pre><code class="language-ballerina">
byte c = 23;

</code></pre>

<p>Along with general byte array type, there is also a special syntax for defining base64 and base16 based array of bytes. With this, <code class="highlighter-rouge">blob</code> type is removed and replaced by byte array.</p>

<pre><code class="language-ballerina">
byte[] arr1 = [5, 24, 56, 243];
byte[] arr2 = base16 `aeeecdefabcd12345567888822`;
byte[] arr3 = base64 `aGVsbG8gYmFsbGVyaW5hICEhIQ==`;

</code></pre>

<h2 id="bitwise-and--or--xor-">Bitwise AND (&amp;), OR (|), XOR (^)</h2>
<p>Bitwise operations AND (&amp;), OR (|), XOR (^) have been added for <code class="highlighter-rouge">byte</code> type and <code class="highlighter-rouge">int</code> type with the following rules.</p>

<p>Both the right-hand-side and left-hand-side of the expression should be of the same type (<code class="highlighter-rouge">byte</code> or <code class="highlighter-rouge">int</code>), and the expected type will be also of the same type. If this is not the case, it will result in a compilation error.
An explicit conversion operation should be applied if the type of one side is not the same as the other side.</p>

<pre><code class="language-ballerina">
byte a = 13;
byte b = 45;
byte c = a &amp; b;
byte d = a | b;
byte e = a ^ b;

</code></pre>

<h2 id="table-expression">Table Expression</h2>

<p>A table is intended to be similar to a relational database table. A table value contains an immutable set of column names and a set of data rows. Syntax for defining a table and adding data rows is as below.</p>

<pre><code class="language-ballerina">
table&lt;Person&gt; t1 = table {
	{ primarykey id, primarykey salary, name, age, married }, [
		 {1, 300.5, "jane",  30, true},
		 {2, 302.5, "anne",  23, false},
		 {3, 320.5, "john",  33, true}
	]
};

// We can also create the row records seperately and then use it with
// table definition
Person p1 = { id: 1, age: 30, salary: 300.50, name: "jane", married: true };
Person p2 = { id: 1, age: 30, salary: 300.50, name: "jane", married: true };

table&lt;Person&gt; t1 = table {
	{ primarykey id, salary, name, age, married },
	[p1, p2]
};

</code></pre>

<h2 id="map-access">Map Access</h2>
<p>Values of a map can be accessed using index-based syntax as well as field-access syntax. Accessing a value using field-based syntax returns the value if the key exists. Otherwise a runtime error is thrown. Index-based syntax also will return the value if the key exists. However, it will return a null value if the key does not exist. This would also mean that, for a constrained map, the type of the return value for the index-based syntax is always the <code class="highlighter-rouge">constraint_type|()</code> as explained below.</p>

<pre><code class="language-ballerina">
map&lt;string&gt; m = {"fname" : "John", "lname" : "Doe"}

// Field based access
string firstName = m.fname;

// Following will result in a runtime error
string middleName = m.mname;

// Index based access
string? firstName = m["fname"];

// Following will return null
string? middleName = m["mname"];

</code></pre>

<h2 id="ballerina-observability">Ballerina Observability</h2>
<ul>
  <li>New API’s have been introduced with ballerina observability functionality, such that developers can define their own trace blocks and metrics as explained below.</li>
  <li>Developers can attach the trace information of their code block to the default Ballerina traces, or a new trace as below.</li>
</ul>

<pre><code class="language-ballerina">
// Create and attach span to the default Ballerina request trace.
int spanId = check observe:startSpan("Child Span");
    // Do Something
_ = observe:finishSpan(spanId);

// Create a completely new trace.
int spanId = observe:startRootSpan("Parent Span");
    //Do Something
int spanId2 = check observe:startSpan("Child Span", parentSpanId = spanId);
    // Do Something
_ = observe:finishSpan(spanId2);
    // Do Something
_ = observe:finishSpan(spanId);

</code></pre>

<ul>
  <li>Developers can create a metric (counter or gauge) and have have their own measurements. The created metric can be registered in order to include its measurements to reporters such as Prometheus as below.</li>
</ul>

<pre><code class="language-ballerina">
// Create counter and register.
map&lt;string&gt; counterTags = { "method": "GET" };
observe:Counter counterWithTags = new ("CounterWithTags",
    desc = "Some description", tags = counterTags);
counterWithTags.register() but {
   error e =&gt; log:printError("Cannot register the counter", err = e)
};

// Create statistics config to enable statistics calculation.
observe:StatisticConfig[] statsConfigs = [];
observe:StatisticConfig config =
    {timeWindow:30000, percentiles:[0.33, 0.5, 0.9, 0.99], buckets:3};
statsConfigs[0]=config;

// Create gauge and register.
observe:Gauge gaugeWithStats = new ("GaugeWithTags",
    desc = "Some description", tags = gaugeTags,
    statisticConfig = statsConfigs);

</code></pre>

<ul>
  <li>All metrics registered can be retrieved and looked up individually as below.</li>
</ul>

<pre><code class="language-ballerina">
// Get All Metrics
observe:Metric[] metrics = observe:getAllMetrics();
foreach metric in metrics {
    // Do something.
}

// Look up a registered metric.
map&lt;string&gt; tags = { "method": "GET" };
observe:Counter|observe:Gauge|() metric =
    observe:lookupMetric("MetricName", tags = tags);
match metric {
    observe:Counter counter =&gt; {
            counter.increment(amount=10);
    }
    observe:Gauge gauge =&gt; {
            gauge.increment(amount = 10.0);
    }
    () =&gt; {
           io:println("No Metric Found!");
    }
}

</code></pre>

<h2 id="standard-library-improvements">Standard Library Improvements</h2>

<ul>
  <li>With the inclusion of byte[], WebSocket related signatures of resources such as <code class="highlighter-rouge">onBinary</code>, <code class="highlighter-rouge">onPing</code>, and <code class="highlighter-rouge">onPong</code> and functions such as <code class="highlighter-rouge">pushBinary()</code>, <code class="highlighter-rouge">ping()</code>, and <code class="highlighter-rouge">pong()</code> now have <code class="highlighter-rouge">byte[]</code> in their signature instead of a blob.</li>
  <li>The HTTP transport error handler has been improved so that it recovers execution from inbound/outbound failures such as idle socket timeout and abrupt connection closure.</li>
  <li>The circuit breaker now supports request volume threshold parameter. This parameter sets the minimum number of requests in a <code class="highlighter-rouge">RollingWindow</code> that will trip the circuit. So the rollingWindow configurations can be specified as below.</li>
</ul>

<pre><code class="language-ballerina">
rollingWindow : {
      timeWindowMillis: 10000,
      bucketSizeMillis: 2000,
      requestVolumeThreshold: 10
}

</code></pre>

<h2 id="build--package-management">Build &amp; Package Management</h2>

<ul>
  <li>The Ballerina <code class="highlighter-rouge">build</code> command output has been enhanced with more details about the build. Also by default, the test module will now be executed with the <code class="highlighter-rouge">build</code> command.</li>
  <li>Ballerina <code class="highlighter-rouge">push</code> command now mandates the Ballerina <code class="highlighter-rouge">build</code> also along with it, which make sure that packages are built before it is pushed to the Central.</li>
  <li>Ballerina Central now supports to view previous versions of a package. It also now shows Ballerina version compatibility section.</li>
</ul>

<h2 id="ides--language-server">IDEs &amp; Language Server</h2>

<ul>
  <li>Composer is now shipped as a native Electron App.</li>
  <li>Language server now includes source code formatting and also supports finding all symbols in a document and in the workspace.</li>
  <li>IntelliJ IDEA Ballerina Plugin has added improvements for the Ballerina source code debugger.</li>
</ul>

     </div>
</section>

<section class="cFooter">
   <div class="container ">
      <div class="row">
         
            
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 cBallerina-io-left-col cBallerinaFooterLinks">
        <ul>
            <li><a class="cBioFooterLink" href="/downloads">Download</a></li>
            <li><a class="cBioFooterLink" href="https://github.com/ballerina-lang/ballerina/blob/master/LICENSE">Code License</a></li>
            <li><a class="cBioFooterLink" href="/license-of-site">Site License</a></li>
            <li><a class="cBioFooterLink" href="/terms-of-service">TERMS OF SERVICE</a></li>
            <li><a class="cBioFooterLink" href="/privacy-policy">PRIVACY POLICY</a></li>
            </ul>
        </div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 cBallerina-io-middle-col cBallerinaFooterSignUp">
        <div class="cSocialmedia">
            <ul>
                <li>
                    <a class="cBioFooterLink" href="https://github.com/ballerina-platform" target="_blank"><img src="https://ballerina.io/img/github.svg"></a>
                    </li>
                <li><a class="cBioFooterLink" href="https://stackoverflow.com/questions/tagged/ballerina" target="_blank"><img src="https://ballerina.io/img/stackoverflow.svg"></a></li>
                <li><a class="cBioFooterLink" href="https://twitter.com/ballerinalang" target="_blank"><img src="https://ballerina.io/img/twitter.svg"></a></li>
                <li><a class="cBioFooterLink" href="/community/slack/"><img src="https://ballerina.io/img/slack.svg"></a></li>
                </ul>
            <div class="pdframe"></div>
            </div>
        </div>
    <div class="col-xs-12 col-sm-10 col-md-6 col-lg-6 cBallerina-io-right-col">
        <p>In the creation of Ballerina, we were inspired by so many technologies. Thank you to all that have come before us (and forgive us if we missed one): Java, Go, C, C++, D, Rust, Haskell, Kotlin, Dart, TypeScript, JavaScript, Python, Perl, Flow, Swift, Elm, RelaxNG, NPM, Crates, Maven, Gradle, Kubernetes, Docker, Envoy, Markdown, GitHub and WSO2.</p></div>
    </div>

        
         
      </div>
   </div>
</section>
         
       
        

    
         
      </div>
   </div>







   

</body>

</html>